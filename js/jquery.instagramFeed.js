!function(e){function a(e){return e.replace(/[&<>"'`=\/]/g,function(e){return i[e]})}var r={host:"https://www.instagram.com/",username:"",tag:"",container:"",display_profile:!0,display_biography:!0,display_gallery:!0,display_igtv:!1,get_data:!1,callback:null,styling:!0,items:8,items_per_row:4,margin:.5,image_size:640},t={150:0,240:1,320:2,480:3,640:4},i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};e.instagramFeed=function(i){var n=e.fn.extend({},r,i);if(""==n.username&&""==n.tag)return console.error("Instagram Feed: Error, no username or tag found."),!1;if(void 0!==n.get_raw_json&&(console.warn("Instagram Feed: get_raw_json is deprecated. See use get_data instead"),n.get_data=n.get_raw_json),!n.get_data&&""==n.container)return console.error("Instagram Feed: Error, no container found."),!1;if(n.get_data&&null==n.callback)return console.error("Instagram Feed: Error, no callback defined to get the raw json"),!1;var s=""==n.username,o=s?n.host+"explore/tags/"+n.tag+"/":n.host+n.username+"/";return e.get(o,function(r){try{r=r.split("window._sharedData = ")[1].split("<\/script>")[0]}catch(e){return void console.error("Instagram Feed: It looks like the profile you are trying to fetch is age restricted. See https://github.com/jsanahuja/InstagramFeed/issues/26")}if(r=JSON.parse(r.substr(0,r.length-1)),void 0!==(r=r.entry_data.ProfilePage||r.entry_data.TagPage))if(r=r[0].graphql.user||r[0].graphql.hashtag,n.get_data)n.callback(r);else{var i={profile_container:"",profile_image:"",profile_name:"",profile_biography:"",gallery_image:""};if(n.styling){i.profile_container=" style='text-align:center;'",i.profile_image=" style='border-radius:10em;width:15%;max-width:125px;min-width:50px;'",i.profile_name=" style='font-size:1.2em;'",i.profile_biography=" style='font-size:1em;'";var o=(100-2*n.margin*n.items_per_row)/n.items_per_row;i.gallery_image=" style='margin:"+n.margin+"% "+n.margin+"%;width:"+o+"%;float:left;'"}var l="";n.display_profile&&(l+="<div class='instagram_profile'"+i.profile_container+">",l+="<img class='instagram_profile_image' src='"+r.profile_pic_url+"' alt='"+(s?r.name+" tag pic":r.username+" profile pic")+"'"+i.profile_image+" />",l+=s?"<p class='instagram_tag'"+i.profile_name+"><a href='https://www.instagram.com/explore/tags/"+n.tag+"' rel='noopener' target='_blank'>#"+n.tag+"</a></p>":"<p class='instagram_username'"+i.profile_name+">@"+r.full_name+" (<a href='https://www.instagram.com/"+n.username+"' rel='noopener' target='_blank'>@"+n.username+"</a>)</p>",!s&&n.display_biography&&(l+="<p class='instagram_biography'"+i.profile_biography+">"+r.biography+"</p>"),l+="</div>");var g=void 0!==t[n.image_size]?t[n.image_size]:t[640];if(n.display_gallery)if(void 0!==r.is_private&&!0===r.is_private)l+="<p class='instagram_private'><strong>This profile is private</strong></p>";else{var d=(r.edge_owner_to_timeline_media||r.edge_hashtag_to_media).edges;h=d.length>n.items?n.items:d.length,l+="<div class='instagram_gallery'>";for(f=0;f<h;f++){var m,_,p="https://www.instagram.com/p/"+d[f].node.shortcode;switch(d[f].node.__typename){case"GraphSidecar":_="sidecar",m=d[f].node.thumbnail_resources[g].src;break;case"GraphVideo":_="video",m=d[f].node.thumbnail_src;break;default:_="image",m=d[f].node.thumbnail_resources[g].src}l+="<a href='"+p+"' class='instagram-"+_+"' rel='noopener' target='_blank'>",l+="<img src='"+m+"' alt='"+a(void 0!==d[f].node.edge_media_to_caption.edges[0]&&void 0!==d[f].node.edge_media_to_caption.edges[0].node&&void 0!==d[f].node.edge_media_to_caption.edges[0].node.text&&null!==d[f].node.edge_media_to_caption.edges[0].node.text?d[f].node.edge_media_to_caption.edges[0].node.text:void 0!==d[f].node.accessibility_caption&&null!==d[f].node.accessibility_caption?d[f].node.accessibility_caption:(s?r.name:r.username)+" image "+f)+"'"+i.gallery_image+" />",l+="</a>"}l+="</div>"}if(n.display_igtv&&void 0!==r.edge_felix_video_timeline){var c=r.edge_felix_video_timeline.edges,h=c.length>n.items?n.items:c.length;if(c.length>0){l+="<div class='instagram_igtv'>";for(var f=0;f<h;f++)l+="<a href='https://www.instagram.com/p/"+c[f].node.shortcode+"' rel='noopener' target='_blank'>",l+="<img src='"+c[f].node.thumbnail_src+"' alt='"+n.username+" instagram image "+f+"'"+i.gallery_image+" />",l+="</a>";l+="</div>"}}e(n.container).html(l)}else console.error("Instagram Feed: It looks like YOUR network has been temporary banned because of too many requests. See https://github.com/jsanahuja/jquery.instagramFeed/issues/25")}).fail(function(e){console.error("Instagram Feed: Unable to fetch the given user/tag. Instagram responded with the status code: ",e.status)}),!0}}(jQuery)